---
title: 进程与线程
date: 2016-10-27 22:14:57
tags:
- 操作系统
- work
---
进程和线程：
打开电脑我们会发现电脑运行了多个进程（写代码、听音乐…），如果是一个单核电脑，它在某一时刻只能执行一个进程,为什么我们既能听歌，又能写代码呢？那是因为cpu在飞快的切换！在我们看来像是多个进程同时进行。但对于现在的多核计算机，当然可以在同一时刻运行多个进程，并且进程间的内存是相互独立的。
<!--more-->
进程和线程的关系：进程是资源分配的最小单位，线程是CPU调度的最小单位
对于两者关个人理解：进程可以看作是一个应用程序，要运行这个应用程序系统需要分配各种资源，用来完成一个应用程序。而为了完成这个程序，每个进程可以创建N个线程去一起完成这个程序，而cpu真正执行其实是在执行每一个线程，所以说线程是CPU调度的最小单位。因为这些线程属于同一个进程，所以所有的进程拥有相同的资源，并且共用所有的资源。所有线程是并发执行，也就是一起执行。当然线程是由CPU调度，当在单核计算机上，所有线程也只能一个一个顺序执行。对于多核计算机，不同线程可以一起进行。
由此可能产生的问题：
线程共享资源，可能造成数据不一致，顺序不一致等。由此就产生了多线程的问题。那么在java编程中如何解决很多敏感数据产生的多线程问题？java提供了很多机制保证线程安全，为了更好的理解各种机制，先了解一下一个任务如何被执行，执行过程如图：
<img src="/img/进程与线程执行.png" >
执行过程：1.将作业读入到外存（应该是硬盘一类的吧）。并创建进程。作业以进程的形式放在外存。
 2.将外存的进程按照进程调度的规则调入内存。
    2.1进程在内存中可以创建线程，由CPU按照线程调度的规则，进程调度执行。
3.在内存中的进程，有时会因为某种原因（为了避免死锁，必须释放资源等）不得不被调出内存，处于挂起状态，此时进程被调入内存，依然以进程的形式存在。（此处涉及到操作系统的很多知识，有兴趣的同学可以深入学习，此处为了讲述多线程，不做详细介绍）

由于线程是CPU调度的最小单位，所以在程序中的多线程问题，就是发生在上述过程中的内存中，线程调度部分，在内存中线程执行过程：
<img src="/img/进程的生命周期.png" >
